<!-- app/views/shared/_header.html.erb -->
<div class="header-container">
  <div class="header fixed-top">
    <% if user_signed_in? %>
      <div class="dropdown" data-controller="dropdown">
        <% if @profile && @profile.photo.present? %>
          <%= cl_image_tag(@profile.photo.key, class: "avatar-bordered dropdown-toggle", alt: "avatar-bordered", id: "dropdownMenuButton", data: { bs_toggle: "dropdown", action: "click->dropdown#drop" }, 'aria-expanded': "false") %>
        <% else %>
          <%= image_tag("https://res.cloudinary.com/drp9liavk/image/upload/v1719308669/avatar2_byf4no.png", class: "avatar-bordered dropdown-toggle", alt: "avatar-bordered", id: "dropdownMenuButton", data: { bs_toggle: "dropdown", action: "click->dropdown#drop" }, 'aria-expanded': "false") %>
        <% end %>
        <ul class="dropdown-menu d-none" aria-labelledby="dropdownMenuButton" data-dropdown-target="down">
          <li><%= link_to 'Mon compte', edit_user_registration_path, class: 'dropdown-item' %></li>
          <% if current_user.profile.present? %>
            <li><%= link_to 'Mon profil', edit_profile_path(current_user.profile), class: 'dropdown-item' %></li>
          <% else %>
            <li><%= link_to 'CrÃ©er un profil', new_profile_path, class: 'dropdown-item' %></li>
          <% end %>
          <li><%= link_to "Se deconnecter", destroy_user_session_path, method: :delete, class: "dropdown-item logout-link" %></li>
        </ul>
      </div>
    <% else %>
      <%= image_tag("https://res.cloudinary.com/drp9liavk/image/upload/v1719308669/avatar2_byf4no.png", class: "avatar-bordered", alt: "avatar-bordered") %>
    <% end %>
    <h2 class="titre-principal mx-auto">DoggyWalky</h2>
  </div>
</div>
